<div class="page-header">
  <span class="h1"><%= @project.name %>: Manage Memberships</span>
</div>
<ol class="breadcrumb">
  <li><%= link_to "Projects", projects_path %></li>
  <li><%= link_to @project.name, project_path(@project) %></li>
  <li class="active">Memberships</li>
</ol>
<div class="well form-inline col col-sm-8">
  <%= form_for [@project, @membership] do |f| %>
    <%= f.collection_select :user_id, User.order(:first_name), :id, :full_name, {:prompt => "Please select a user..."}, {class: "dropdown form-control"} %>
    <%= f.select :title, [['Member', false],['Owner', true]], {}, {class: "dropdown-toggle form-control"} %>
    <%= f.submit 'Add New Member', class: "btn btn-primary" %>
  <% end %>
</div>
<div class="col col-sm-8">
  <table class="table">
    <thead>
        <tr>
            <th>
              User
            </th>
            <th>
              Title
            </th>
            <th>
              Update
            </th>
            <th>
              Destroy
            </th>
        </tr>
    </thead>
    <tbody>
      <% @project.users.order(:last_name).each do |user| %>
        <% user.memberships.each do |membership| %>
          <%= form_for [@project, membership] do |f| %>
            <tr>
              <td>
                <%= link_to user.full_name, user_path(user) %>
              </td>
              <td>
                <%= f.select :title, [['Member', false],['Owner', true]], {}, {class: "dropdown-toggle form-control"} %>
              </td>
              <td>
                <%= f.submit "Update", class: "btn btn-primary" %>
              </td>
              <td>
                <%= link_to "", project_membership_path(@project, membership), method: :delete, data: { confirm: 'Are you sure?'}, class: "glyphicon glyphicon-remove" %>
              </td>
            </tr>
          <% end %>
        <% end %>
      <% end %>
    </tbody>
  </table>
</div>
